<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Confirmed — Warm Vibe Bistro</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/order_confirmation.css' %}">
</head>
<body>

<!-- NAV -->
<nav class="site-nav">
  <a href="/" class="nav-logo">Warm Vibe Bistro</a>
  <div class="nav-links">
    <a href="{% url 'menu:menu' %}">Menu</a>
    <a href="{% url 'reservations:reservation' %}">Reservations</a>
    <a href="{% url 'orders:cart' %}" class="nav-cta">Cart</a>
  </div>
</nav>

<!-- PAGE HEADER -->
<div class="page-header">
  <div class="header-eyebrow">Takeout Order</div>
  <h1>Order <em>Confirmed</em></h1>
</div>

<!-- STEPS INDICATOR — all done -->
<div class="steps">
  <div class="step done">Cart</div>
  <div class="step done">Your Details</div>
  <div class="step active">Confirmation</div>
</div>

<div class="container">

  <!-- Success message -->
  <div class="success-banner">
    <div class="success-icon">✓</div>
    <div>
      <p class="success-title">Payment received — you're all set!</p>
      <p class="success-sub">We've received your order and sent a confirmation to your email. See you at pickup.</p>
    </div>
  </div>

  <div class="confirmation-layout">

    <!-- Order details card -->
    <div class="order-card">
      <div class="section-label">Order Details</div>

      <div class="order-number-block">
        <span class="order-number-label">Order Number</span>
        <span class="order-number">#{{ order.order_number|stringformat:"s"|slice:":8"|upper }}</span>
      </div>

      <div class="detail-rows">
        <div class="detail-row">
          <span class="detail-label">Name</span>
          <span class="detail-value">{{ order.name }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Email</span>
          <span class="detail-value">{{ order.email }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Pickup Time</span>
          <span class="detail-value pickup-highlight">{{ order.pickup_time|date:"F j, Y" }} at {{ order.pickup_time|time:"g:i A" }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Status</span>
          <span class="status-badge status-{{ order.status }}">{{ order.get_status_display }}</span>
        </div>
      </div>

      <!-- Items -->
      <div class="section-label" style="margin-top:2rem;">Items Ordered</div>
      {% for item in order.items.all %}
        <div class="item-row">
          <span class="item-name">{{ item.quantity }}× {{ item.name }}</span>
          <span class="item-price">${{ item.item_total }}</span>
        </div>
      {% endfor %}

      <div class="totals">
        {% if order.discount_amount %}
          <div class="total-row discount-row">
            <span>Discount</span>
            <span>−${{ order.discount_amount }}</span>
          </div>
        {% endif %}
        <div class="total-row grand-total">
          <span>Total Paid</span>
          <span>${{ order.total }}</span>
        </div>
      </div>
    </div>

    <!-- Pickup info -->
    <div class="sidebar">
      <div class="pickup-card">
        <div class="section-label">Pickup Information</div>
        <p class="pickup-time-display">{{ order.pickup_time|date:"F j, Y" }}<br><em>{{ order.pickup_time|time:"g:i A" }}</em></p>
        <div class="pickup-detail">
          <span class="pickup-detail-label">Location</span>
          <span>123 Bistro Lane, Makati City, Metro Manila</span>
        </div>
        <div class="pickup-detail">
          <span class="pickup-detail-label">Note</span>
          <span>Show your order number or confirmation email when you arrive.</span>
        </div>
      </div>

      <div class="actions">
        <a href="{% url 'menu:menu' %}" class="btn-primary">Order Again →</a>
        <a href="{% url 'orders:order_history' %}?email={{ order.email }}" class="btn-ghost">View Order History</a>
      </div>
    </div>

  </div>
</div>

</body>
</html>